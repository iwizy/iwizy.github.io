---
sidebar_position: 4
slug: /normalization
---

# Нормализация и денормализация

Нормализация — это процесс организации данных в реляционной базе данных для минимизации избыточности данных и предотвращения аномалий при обновлении, удалении и добавлении данных. Основная цель нормализации — сделать базу данных более структурированной и эффективной для использования.

Нормализация выполняется в несколько этапов, называемых **нормальными формами**. Каждая следующая нормальная форма (НФ) накладывает более строгие требования на структуру данных.

## Основные нормальные формы

### Первая нормальная форма (1NF)

- Все значения атрибутов являются атомарными (неделимыми).
- Каждая запись уникальна и имеет первичный ключ.

**Пример:**
Таблица до нормализации:

| ID  | Имя     | Телефоны           |
|-----|---------|--------------------|
| 1   | Иван    | 123, 456           |
| 2   | Ольга   | 789                |

После нормализации в 1NF:

| ID  | Имя     | Телефон |
|-----|---------|---------|
| 1   | Иван    | 123     |
| 1   | Иван    | 456     |
| 2   | Ольга   | 789     |

### Вторая нормальная форма (2NF)

- Выполняются требования 1NF.
- Все неключевые атрибуты зависят от всего первичного ключа.

**Пример:**
Таблица до нормализации:

| ID  | Курс   | Преподаватель  |
|-----|--------|----------------|
| 1   | Матем  | Иванов         |
| 2   | Физика | Петров         |
| 1   | Матем  | Иванов         |

Здесь **ID** и **Курс** образуют составной первичный ключ. Но преподаватель зависит только от курса.

После нормализации в 2NF:
Таблица студентов:

| ID  | Курс   |
|-----|--------|
| 1   | Матем  |
| 2   | Физика |

Таблица курсов:

| Курс   | Преподаватель  |
|--------|----------------|
| Матем  | Иванов         |
| Физика | Петров         |

### Третья нормальная форма (3NF)

- Выполняются требования 2NF.
- Удаляются транзитивные зависимости (когда один неключевой атрибут зависит от другого неключевого атрибута).

**Пример:**
Таблица до нормализации:

| ID  | Курс   | Преподаватель  | Кафедра      |
|-----|--------|----------------|--------------|
| 1   | Матем  | Иванов         | Математика   |
| 2   | Физика | Петров         | Физика       |

Здесь кафедра зависит от преподавателя, что создает транзитивную зависимость.

После нормализации в 3NF:
Таблица студентов:

| ID  | Курс   |
|-----|--------|
| 1   | Матем  |
| 2   | Физика |

Таблица курсов:

| Курс   | Преподаватель  |
|--------|----------------|
| Матем  | Иванов         |
| Физика | Петров         |

Таблица преподавателей:

| Преподаватель  | Кафедра      |
|----------------|--------------|
| Иванов         | Математика   |
| Петров         | Физика       |

## Денормализация

Денормализация — это процесс обратный нормализации, который объединяет таблицы для увеличения производительности запросов за счет устранения необходимости частых соединений таблиц. Этот процесс часто приводит к дублированию данных.

### Когда нужна денормализация?

- Для повышения скорости выполнения сложных запросов.
- В системах, где производительность важнее целостности данных.
- Когда данные читаются чаще, чем обновляются.

**Пример денормализации:**
Допустим, у нас есть нормализованные таблицы:

Таблица студентов:

| ID  | Курс   |
|-----|--------|
| 1   | Матем  |
| 2   | Физика |

Таблица курсов:

| Курс   | Преподаватель  |
|--------|----------------|
| Матем  | Иванов         |
| Физика | Петров         |

После денормализации:

| ID  | Курс   | Преподаватель  |
|-----|--------|----------------|
| 1   | Матем  | Иванов         |
| 2   | Физика | Петров         |

Денормализация устраняет необходимость соединения таблиц, но приводит к дублированию данных. Например, если преподаватель для курса изменится, придется обновлять множество строк.

## Преимущества нормализации

- Минимизация избыточности данных.
- Уменьшение потребления памяти.
- Упрощение поддержки целостности данных.

## Преимущества денормализации

- Увеличение производительности запросов.
- Упрощение структуры базы данных для чтения.

Нормализация и денормализация — это баланс между целостностью данных и производительностью системы. Выбор подхода зависит от конкретных требований проекта.