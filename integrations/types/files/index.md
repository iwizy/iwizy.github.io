---
sidebar_position: 4
slug: /types/files
---

# Обмен файлами

Интеграция с помощью обмена файлами — это способ передачи данных между системами или приложениями, при котором данные передаются в виде файлов. Этот подход используется, когда прямое API-соединение невозможно или нецелесообразно. Ниже рассмотрим основные аспекты и пример интеграции.

## Основные принципы

1. **Форматы файлов**  
   Чаще всего используются форматы:
   - **CSV**: табличные данные.
   - **JSON**: структурированные данные (особенно для сложных вложенных структур).
   - **XML**: иерархические данные.
   - **TXT**: для простых текстовых данных.
   - **Excel (XLS/XLSX)**: табличные данные с дополнительными возможностями форматирования.

2. **Передача файлов**  
   Основные способы передачи:
   - **FTP/SFTP**: передача файлов по сети через защищенные каналы.
   - **API с загрузкой файлов**: предоставление файла через HTTP-запросы.
   - **Облачные хранилища**: использование платформ (например, Google Drive, Dropbox).
   - **Локальная передача**: через общую файловую систему.

3. **Периодичность передачи**  
   Интеграции могут быть:
   - **Реального времени**: файл создается и обрабатывается сразу при поступлении.
   - **Пакетными**: файлы передаются и обрабатываются раз в день, неделю и т.д.

4. **Обработка файлов**  
   Получающая сторона:
   - Валидирует файл (проверка формата, структуры, допустимых значений).
   - Импортирует данные в базу, систему или приложение.

## Пример интеграции через обмен файлами

### **Сценарий**

Есть система управления складом (WMS) и система управления заказами (OMS). Необходимо интегрировать их для передачи информации о заказах.

### Шаги

1. **Создание файла заказа (на стороне OMS)**  
OMS генерирует CSV-файл с данными о заказах:

   ```csv
   order_id,product_id,quantity,delivery_date
   101,501,3,2025-01-28
   102,502,1,2025-01-29
   103,503,5,2025-01-30
   ```

2. **Передача файла**  
Файл передается на сервер WMS через SFTP:
   - Адрес: `sftp.warehouse.com`
   - Логин: `oms_user`
   - Папка: `/incoming_orders/`

3. **Обработка файла (на стороне WMS)**  
WMS обрабатывает файл:
   - Проверяет наличие всех полей (order_id, product_id, quantity, delivery_date).
   - Проверяет, чтобы даты были в будущем и количество товара положительное.

4. **Ответное уведомление (на стороне WMS)**  
После обработки WMS создает файл ответа:

   ```csv
   order_id,status,comment
   101,accepted,
   102,accepted,
   103,rejected,Product out of stock
   ```

   Этот файл отправляется обратно в OMS через ту же систему SFTP.

## Преимущества

- **Простота реализации**: не требует сложных API или прямого соединения.
- **Универсальность**: подходит для интеграции разных систем и платформ.
- **Независимость**: каждая система может обрабатывать данные в удобное для нее время.

## Недостатки

- **Отсутствие в реальном времени**: возможны задержки, особенно при пакетной обработке.
- **Уязвимость к ошибкам формата**: если файл неправильно сформирован, интеграция может сорваться.
- **Дополнительные затраты на обработку**: парсинг, валидация и логирование требуют ресурсов.

Этот подход подходит для систем, где важны автономность и возможность обработки данных вне прямого подключения.
