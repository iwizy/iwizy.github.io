---
sidebar_position: 3
slug: /data-model-design
---

# Проектирование модели данных

Проектирование модели данных — это процесс создания структуры, которая будет использоваться для хранения, обработки и управления информацией в системе или приложении. Этот процесс включает в себя анализ данных, выявление сущностей, атрибутов и связей между ними, а также реализацию модели на конкретной платформе. Модель данных — это фундамент, на котором строится система, поэтому важно уделить внимание ее точности и оптимальности.

## Этапы проектирования модели данных

### Сбор и анализ требований

Этот этап начинается с изучения целей системы, анализа бизнес-процессов и определения того, какие данные будут использоваться. Здесь важно понять:

- Какие данные будут храниться?
- Как они связаны?
- Какие операции нужно поддерживать (добавление, обновление, удаление, запросы)?

**Пример:**  
Для интернет-магазина можно выделить такие ключевые объекты:

- **Товары**: Название, цена, описание, категория.
- **Клиенты**: Имя, адрес, контактная информация.
- **Заказы**: Номер заказа, дата, статус, список товаров в заказе.

### Создание концептуальной модели данных

Концептуальная модель описывает основные сущности и их взаимосвязи. Она обычно представлена в виде диаграмм "Сущность-Связь" (ER-диаграмм). Здесь нет детальной проработки атрибутов и типов данных, акцент сделан на ключевых понятиях системы.

**Пример ER-диаграммы:**  

- Сущности:  
  - Клиент  
  - Заказ  
  - Товар  
- Связи:
  - Клиент может сделать много заказов (1 ко многим).  
  - Заказ может включать много товаров (многие ко многим).

### Создание логической модели данных

Логическая модель — это следующий шаг, на котором сущности превращаются в таблицы, связи становятся внешними ключами, а атрибуты уточняются. Здесь также добавляются правила валидации и типы данных.

**Пример:**  

- Таблица `Клиенты`:
  - Поля: `КлиентID` (PK, уникальный идентификатор), `Имя` (VARCHAR), `Адрес` (TEXT), `Телефон` (VARCHAR).
- Таблица `Заказы`:
  - Поля: `ЗаказID` (PK), `Дата` (DATE), `КлиентID` (FK).
- Таблица `Товары`:
  - Поля: `ТоварID` (PK), `Название` (VARCHAR), `Цена` (DECIMAL).
- Таблица `Заказы_Товары` (для связи "многие ко многим"):
  - Поля: `ЗаказID` (FK), `ТоварID` (FK), `Количество`.

### Создание физической модели данных

На этом этапе создается реальная база данных на конкретной платформе, например, MySQL, PostgreSQL, MongoDB и т.д. Здесь добавляются индексы, ограничения, выбирается структура таблиц.

**Пример SQL:**  

```sql
CREATE TABLE Клиенты (
    КлиентID INT PRIMARY KEY AUTO_INCREMENT,
    Имя VARCHAR(100),
    Адрес TEXT,
    Телефон VARCHAR(20)
);

CREATE TABLE Заказы (
    ЗаказID INT PRIMARY KEY AUTO_INCREMENT,
    Дата DATE,
    КлиентID INT,
    FOREIGN KEY (КлиентID) REFERENCES Клиенты(КлиентID)
);

CREATE TABLE Товары (
    ТоварID INT PRIMARY KEY AUTO_INCREMENT,
    Название VARCHAR(200),
    Цена DECIMAL(10, 2)
);

CREATE TABLE Заказы_Товары (
    ЗаказID INT,
    ТоварID INT,
    Количество INT,
    PRIMARY KEY (ЗаказID, ТоварID),
    FOREIGN KEY (ЗаказID) REFERENCES Заказы(ЗаказID),
    FOREIGN KEY (ТоварID) REFERENCES Товары(ТоварID)
);
```

### Нормализация данных

Нормализация — это процесс оптимизации структуры базы данных путем устранения избыточности данных и обеспечения их целостности. Основные формы нормализации:

- **Первая нормальная форма (1НФ):** Устранение повторяющихся групп данных.
- **Вторая нормальная форма (2НФ):** Все атрибуты зависят от первичного ключа.
- **Третья нормальная форма (3НФ):** Устранение транзитивных зависимостей.

**Пример:**  
Если в таблице заказов хранятся данные клиента (имя, адрес), они дублируются при каждом новом заказе. Решение: вынос данных клиента в отдельную таблицу.

### Оптимизация и денормализация (при необходимости)

Денормализация применяется для повышения производительности запросов, особенно в системах, где важна скорость чтения. Это может включать:

- Объединение таблиц.
- Создание агрегированных данных.

**Пример:**  
Вместо выполнения нескольких сложных запросов для получения суммы заказов клиента, можно добавить поле "Общая сумма заказов" в таблицу клиентов.

### Тестирование и внедрение

Перед запуском базы данных проводится тестирование:

- На корректность структуры (например, работают ли внешние ключи).
- На производительность (скорость выполнения запросов).
- На соответствие требованиям.

## Подходы к проектированию моделей данных

### Реляционная модель данных

Наиболее распространенный подход. Данные организованы в таблицы, между которыми устанавливаются связи через первичные и внешние ключи.

**Пример:**  
Таблицы `Клиенты`, `Заказы`, `Товары` связаны через ключи.

### Документная модель данных

Используется в NoSQL базах данных, таких как MongoDB. Данные хранятся в виде документов JSON.

**Пример документа:**  

```json
{
    "КлиентID": 1,
    "Имя": "Иван Иванов",
    "Заказы": [
        {
            "ЗаказID": 101,
            "Дата": "2025-01-01",
            "Товары": [
                {"ТоварID": 201, "Название": "Ноутбук", "Цена": 50000, "Количество": 1},
                {"ТоварID": 202, "Название": "Мышь", "Цена": 1000, "Количество": 2}
            ]
        }
    ]
}
```

### Графовая модель данных

Используется для сложных взаимосвязей, например, в социальных сетях. Графовая база данных (например, Neo4j) хранит данные в виде узлов и связей.

**Пример:**  

- Узлы: Клиент, Товар, Заказ.  
- Связи: "сделал заказ", "содержит товар".

## Инструменты для проектирования

1. **Создание ER-диаграмм:**
   - Lucidchart.
   - Draw.io.
   - Microsoft Visio.

2. **Реляционные базы данных:**
   - MySQL.
   - PostgreSQL.
   - Oracle.

3. **NoSQL базы данных:**
   - MongoDB.
   - Cassandra.
